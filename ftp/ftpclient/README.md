


# FTP 的两种工作模式
FTP（文件传输协议）有两种工作模式：主动模式（Active Mode）和被动模式（Passive Mode）。
- 主动模式（Active Mode）：在主动模式下，客户端打开一个数据端口并监听，等待服务器从FTP命令端口（通常是20端口）发起连接。这种模式下，服务器需要能够连接到客户端的任意端口，这在客户端位于防火墙或NAT（网络地址转换）后面时可能会有问题。
- 被动模式（Passive Mode）：在被动模式下，客户端连接到服务器打开的数据端口。这种模式下，客户端需要能够连接到服务器的任意端口，这在服务器位于防火墙或NAT后面时可能会有问题。

应用场景：
- 主动模式：如果FTP客户端有能力接受入站连接（例如，它不在防火墙或NAT后面），那么可以使用主动模式。
- 被动模式：如果FTP服务器有能力接受入站连接（例如，它不在防火墙或NAT后面），那么可以使用被动模式。被动模式是现代FTP服务器和客户端的默认模式，因为大多数客户端都在防火墙或NAT后面。


⚠️注意： 被动模式下
1、需要设置在 FTP 服务中设置好开放的端口区间，可以查看配置文件 FTP 服务端配置（默认是：39000-40000）
2、云服务厂商的防火墙、宝塔的"安全-系统防火墙"

> 以上步骤没有做好，会发现连接没问题，登录没问题，创建目录没问题，但是上传文件就会报错：dial tcp 43.139.24.110:39667: connect: operation timed out