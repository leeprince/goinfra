!function(){var t=window;window.parent!==window&&window.inDapIF&&(t=window.parent);var e="__qq_qidian_da_market",n=t[e]||"qidianDA";if(t[e]=n,n){var i=t[n]=t[n]||function(){i[e]=i[e]||[],i[e].push(arguments)};if(!i.loaded){i.loaded=!0;var r,a="1.2.0",o=t.location,s=o.protocol,c="https://v.qidian.qq.com",d="https://admin.qidian.qq.com",u=new Date,h=function(){var t;try{var e=new Uint32Array(1);window.crypto.getRandomValues(e),t=2147483647&e[0]}catch(e){t=Math.floor(2147483648*Math.random())}return t},l=function(){return h().toString(36)},f="S3EVENT_LISTENERS"+l(),p=function(t,e,n){var i=function(e){n.call(t,e)},r=e=e.replace(/^on/i,"");e=(e||"").toLowerCase(),t.addEventListener?t.addEventListener(r,i,!1):t.attachEvent&&t.attachEvent("on"+r,i);var a=t[f]=t[f]||[];return a[a.length]=[e,n,i,r],t},g=function(t,e,n){var i=n;e=e.replace(/^on/i,"").toLowerCase();for(var r,a,o,s=t[f],c=!i,d=s.length;d--;)(r=s[d])[0]!==e||!c&&r[1]!==i||(a=r[3],o=r[2],t.removeEventListener?t.removeEventListener(a,o,!1):t.detachEvent&&t.detachEvent("on"+a,o),s.splice(d,1));return t},v=function(t,e){var n=(e||window).document,i=n.body||n.documentElement;i.insertBefore(t,i.firstChild)},m=function(t){return function(){var e=window.console;void 0!==e&&"function"==typeof e[t]&&e[t].apply(e,arguments)}},y=m("log");y.group=m("group"),y.groupEnd=m("groupEnd");var w=function(){this._s={},this._avg={},this._max={}};w.prototype.start=function(t,e){this._s[t]=e?+e:+new Date},w.prototype.end=function(t,e){var n=this._s[t];this._s[t]=null;var i=(e?+e:+new Date)-n;this._max[t]=Math.max(i,this._max[t]||0);var r=this._avg[t];r?(r.s=(r.s*r.n+i)/(r.n+1),++r.n):r=this._avg[t]={s:i,n:1}},w.prototype.encode=function(){var t="",e=this._avg;for(var n in e)e.hasOwnProperty(n)&&(t+=n+"("+Math.round(e[n].s||0)+"_"+Math.round(this._max[n]||0)+")");return t};var q=new w,_={Boolean:1,Number:1,String:1,Function:1,Array:1,Date:1,RegExp:1,Object:1,Error:1},k=Object.prototype.toString,b=function(t){if(null==t)return String(t);var e=oe(t),n="object";return e===n||"function"===e?(e=k.call(t).slice(8,-1),_[e]?e.toLowerCase():n):oe(t)},S=function(t){if(!t)return"";var e=[],n=/\[\]$/,i=le().encodeURIComponent,r=function(t,n){n="function"==typeof n?n():null==n?"":n,e[e.length]=i(t)+"="+i(n)};return function t(i,a){var o,s;switch(b(a)){case"array":if(i)for(o=0,s=a.length;o<s;o++){if(n.test(i))r(i,a[o]);else t(i+"["+("object"===b(a[o])?o:"")+"]",a[o])}else for(o=0,s=a.length;o<s;o++)t(a[o].key,a[o].value);break;case"object":r(i,JSON.stringify(a));break;default:a=""+a,i?r(i,a):e[e.length]=a}return e}("",t).join("&").replace(/%20/g,"+")},E=function(){return"sendBeacon"in window.navigator},D=function(){try{if("XMLHttpRequest"in window&&"withCredentials"in new window.XMLHttpRequest)return"xhr";if("XDomainRequest"in window)return"xdr"}catch(t){}return""},I=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode+""||RegExp.$1:"",C=function(t,e,n){var i=[t,e].join(t.indexOf("?")>=0?"&":"?"),r="S3PING_IMG"+l(),a=new Image;window[r]=a;var o=function(t){if(a.onload=a.onerror=a.onabort=null,window[r]=null,a=null,n){var e=null;t&&((e=new Error).name="ImgPing"+t),n(e)}};return a.onload=function(){o()},a.onerror=function(){o("Error")},a.onabort=function(){o("Abort")},a.src=i,!0},A=function(t,e,n){if("xhr"!==D())return!1;var i=new window.XMLHttpRequest;return i.open("POST",t,!0),i.withCredentials=!1,i.setRequestHeader("Content-Type","text/plain"),n&&(i.onreadystatechange=function(){if(4===i.readyState){var t=i.status,e=null;if(!(t>=200&&t<400)){var r="XhrPing"+(t<500?"ClientError":"ServerError");(e=new Error(r+" "+t)).name=r}n(e)}}),i.send(JSON.stringify(e)),!0},x=function(t,e,n){var i=t.length+n.length+1;return I&&i>2083&&i-e.length>2048||i>5e3},O=function(t,e,n,i){var r=function(t,e){"string"!=typeof t&&(t=S(t));var n=e&&e.randomKey;return(n=null==n?"z":n)&&(t+=(t?"&":"")+n+"="+l()),t}(e,n),a="",o="",s={};if(!e.forEach)return x(t,d,e=r+"&ext=3")?(t=t.replace("/events/report","/events/trace"),A(t,e,u)):C(t,e,u);e.forEach((function(t){"appkey"===t.key?a=t.value:"kfuin"===t.key?o=t.value:s[t.key]=t.value}));var c=t.match(/(?:https?|ftp):\/\/[^\/]+/);if(!c)throw new Error('URL: "'+t+'" not absolute url.');var d=c[0],u=(n&&n.transport,n&&n.callback),h=i.pingMethods;"BEACON"!==h||E()||(h=i.defaultMethods||"POST"),"$pageclose"!==i.event&&"$pagestay"!==i.event||!E()||(h="BEACON");var f=i.encryptMode,p=i.AES_FUNC;window.btoa&&"GET"!==h||(f="close"),"aes"!==f||p||(f="close");var g=o||i.kfuin||"",v=a||i.appkey||"",m=(v+g).substring(0,16);if(m.length<16)for(var y=16-m.length,w=0;w<y;w++)m+="0";var q,_,k,b=i.AES_FUNC,D=b?b.enc.Utf8.parse(m):"",I={iv:D,mode:b?b.mode.CBC:"",padding:b?b.pad.Pkcs7:""},O=JSON.stringify(s),T={};switch(f){case"default":e={appkey:v,data:window.btoa(window.encodeURIComponent(O)),ext:1},g&&(e.kfuin=Number(g));break;case"aes":e={appkey:v,data:(q=window.btoa(window.encodeURIComponent(O)),_=D,k=q,b.AES.encrypt(k,_,I).ciphertext.toString(b.enc.Base64)),ext:2},g&&(e.kfuin=Number(g));break;case"close":"GET"!==h?(e={appkey:v,data:O,ext:3},g&&(e.kfuin=Number(g))):(e=r+"&ext=3",T={appkey:v,data:O,ext:3},g&&(T.kfuin=Number(g)))}return"GET"===h?x(t,d,e)?(t=t.replace("/events/report","/events/trace"),A(t,T,u)):C(t,e,u):(t=t.replace("/events/report","/events/trace"),"BEACON"===h?function(t,e){return window.navigator.sendBeacon(t,JSON.stringify(e))}(t,e):A(t,e,u))},T=function(t){this._data=t||[]};T.prototype.on=function(t){this._data[t]=!0},T.prototype.off=function(t){this._data[t]=!1},T.prototype.merge=function(t){for(var e=this._data.slice(),n=t._data,i=0;i<n.length;i++)e[i]=e[i]||n[i];return new T(e)},T.prototype.encode=function(){for(var t=[],e=0;e<this._data.length;e++)this._data[e]&&(t[Math.floor(e/6)]^=1<<e%6);for(e=0;e<t.length;e++)t[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(t[e]||0);return t.join("")+"~"};var P=function(){this._gFlags=new T,this._allFlags={}};P.prototype.flag=function(t,e){var n;if(e){var i=this._allFlags;i[e]=i[e]||new T,n=i[e]}else n=this._gFlags;n.on(t)},P.prototype.encode=function(t){var e=this._allFlags[t],n=this._gFlags;return(e?n.merge(e):n).encode()};var j=new P,N=function(t){return t.toString(36)},M="__QIDIANDA_SENDED",$=function(t,e,n){this.module=t,this.version=e,this.trackingServer=n};$.prototype={module:"",version:"",trackingServer:"",wrap:function(t,e,n,i){var r=null==e||"function"===b(e),a=r?e:e[t],o=function(){var e=i?i.id:null;try{var r;return n&&j.flag(n,e),q.start(t),a&&(r=a.apply(this,arguments)),q.end(t),r}catch(t){t[M]||(t[M]=!0)}};return o.displayName=t,r||(e[t]=o),o},errorQueue:[],sending:!1,sendError:function(t,e,n,i,r,a,o){}};var R={},L=function(t,e){var n=parseInt(t.length,10)||0;if(0===n)return!1;for(var i=0;i<n;){if(e===t[i])return!0;i++}return!1},U=function(t){var e=t||window,n="document";return e[n]&&(e=e[n]),"prerender"===e.visibilityState},B=function(t,e){if(!function(t){var e="navigator";return(t=t||window)[e]&&"preview"===t[e].loadPurpose}(t=t||window)){var n=t.document,i=!1,r=function(){e(t)};U(t)?p(n,"visibilitychange",(function e(){i||U(t)||(i=!0,r(),g(n,"visibilitychange",e))})):r()}},V=function(t,e,n){var i=t.length;if(i>0){n=n||i,e=e||0;for(var r=new Array(n-e),a=0,o=e;o<n;o++,a++)r[a]=t[o];return r}return[]},Q=function(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1).toLowerCase()},F=function(t){return String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\-])","g"),"\\$1")},H=function(t,e,n){t=(n&&n._storage_prefix||"")+t;for(var i=[],r=(e=e||window).document.cookie.split(";"),a=new RegExp("^\\s*"+F(t)+"=\\s*(.*?)\\s*$"),o=0;o<r.length;o++){var s=r[o].match(a);s&&(i[i.length]=le().decodeURIComponent(s[1]))}return i},J=function(t,e,n,i,r,a,o){n=n||window,e=le().encodeURIComponent(e);var s=(o&&o._storage_prefix||"")+t+"="+e+"; ";if(null!=a&&(s+="path="+a+"; "),null!=i){var c=new Date;c.setTime(c.getTime()+i),s+="expires="+c.toGMTString()+"; "}null!=r&&(s+="domain="+r+";"),s+="Secure=true;";var d=n.document,u=d.cookie;if(d.cookie=s,u===d.cookie){for(var h=H(t,null,o),l=0;l<h.length;l++)if(e===h[l])return!0;return!1}return!0},W="S3COOKIENAME"+l(),G=function(){var t=window.document;if(window.navigator.cookieEnabled)return!0;t.cookie=W+"=1";var e=-1!==t.cookie.indexOf(W+"=");return t.cookie=W+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e},z=function(){var t="S3LOCALSTORAGE"+l(),e="localStorage";try{return window[e].setItem(t,1),window[e].removeItem(t),!0}catch(t){return!1}},K=function(){var t="DocumentTouch";return!!("ontouchstart"in window||window[t]&&document instanceof window[t])},X=function(){this.tasks={}};X.prototype.set=function(t,e){this.tasks[t]=e},X.prototype.get=function(t){return this.tasks[t]};var Y=new X,Z=function(){};Z.prototype.run=function(t){var e=t.getPVParams();q.start("req-pv"),t.ping("$pageview",e,1)},Z.prototype.remove=function(t){},Y.set("pv",Z);var tt=!1,et=window.navigator,nt=et.userAgent,it=null!=window.chrome&&"Google Inc."===et.vendor&&/Chrome/.test(nt)&&-1===nt.indexOf("OPR")&&-1===nt.indexOf("Edge"),rt=window.navigator.userAgent,at=/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i.test(rt),ot=function(){this.removed=!1};ot.prototype.run=function(t){if(!it&&!at){var e=t.get("win");!function(t,e){var n=(e=e||window).document,i="DOMContentLoaded",r=i+42,a=n[f]=n[f]||[];if(a[a.length]=[r,t,t,i],!tt){tt=!0;var o=!1;if("complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll)le().setTimeout(c);else if(n.addEventListener)n.addEventListener("DOMContentLoaded",u),e.addEventListener("load",u);else{n.attachEvent("onreadystatechange",u),e.attachEvent("onload",u);var s=!1;try{s=null==e.frameElement&&n.documentElement}catch(t){}s&&s.doScroll&&function t(){if(!o){try{s.doScroll("left")}catch(e){return le().setTimeout(t,50)}d(),c()}}()}}function c(){for(var t,i=n[f],a=0;t=i[a];)t[0]===r?((0,t[1])(e),i.splice(a,1)):a++;o=!0}function d(){n.addEventListener?(n.removeEventListener("DOMContentLoaded",u),e.removeEventListener("load",u)):(n.detachEvent("onreadystatechange",u),e.detachEvent("onload",u))}function u(){(n.addEventListener||"load"===e.event.type||"complete"===n.readyState)&&(d(),c())}}(t.wrap("id-cb",(function(){if(this.removed)t.flag(20);else{var n=t.get("ss")+"/da/id.html";(function(t,e){var n=(e||window).document.createElement("iframe");n.src=t,n.title="",n.role="presentation",n.frameBorder="0",n.tabIndex="-1",(n.frameElement||n).style.cssText="position:absolute;width:0;height:0;border:0;",v(n,e)})(n+="?"+S({q:t.get("qid"),p:t.get("pid"),t:t.get("kfuin"),a:t.get("aid"),c:t.get("cid"),s:t.getSid(),src:t.get("src"),pgv_pvi:t.get("pgv_pvi"),v:t.get("ver"),ts:t.getFullApi("id")}),e)}}),19),e)}},ot.prototype.remove=function(t){this.removed=!0},Y.set("id",ot);var st=function(t){return t.target||t.srcElement},ct=function(t){var e=(t=t||window).document;return("BackCompat"===e.compatMode?e.body:e.documentElement).clientWidth},dt=function(t){var e=(t=t||window).document;return("BackCompat"===e.compatMode?e.body:e.documentElement).clientHeight},ut=function(){};ut.prototype.run=function(t){var e=t.get("win"),n=t.get("doc").documentElement;this.cb=t.wrap("clc-cb",(function(n){var i,r=st(n),a=t.getCommonData(),o=(r.nodeName||"").toLowerCase();if(a.add("pw",function(t){var e=(t=t||window).document,n=e.body,i=e.documentElement,r="BackCompat"===e.compatMode?n:e.documentElement;return Math.max(i.scrollWidth,n.scrollWidth,r.clientWidth)}(e)),a.add("ph",function(t){var e=(t=t||window).document,n=e.body,i=e.documentElement,r="BackCompat"===e.compatMode?n:e.documentElement;return Math.max(i.scrollHeight,n.scrollHeight,r.clientHeight)}(e)),a.add("bw",ct(e)),a.add("bh",dt(e)),a.add("bx",function(t){var e=(t=t||window).document;return t.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft}(e)),a.add("by",function(t){var e=(t=t||window).document;return t.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop}(e)),a.add("tag",o),r.href){var s=r.getAttribute("target");s&&a.add("target",s),a.add("href",r.href)}a.add("x",n.clientX||0),a.add("y",n.clientY||0);var c=0;"a"!==o&&"button"!==o||(i=function t(e){var n="",i=e.nodeType;if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=t(e)}else if(3===i||4===i)return e.nodeValue;return n}(r),c=1),"input"!==o||"button"!==r.type&&"submit"!==r.type||(i=r.value||"",c=1),i&&a.add("word",i.slice(0,20)),t.ping("$click",a,c)}));var i=t.supportTouch;i&&t.flag(18),p(n,i?"touchstart":"click",this.cb)},ut.prototype.remove=function(t){var e=t.get("doc").documentElement;g(e,"click",this.cb),t.supportTouch&&g(e,"touchstart",this.cb)},Y.set("clc",ut),pe.prototype.remove=function(){void 0===document.removeEventListener||void 0===document[this.hidden]?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.removeEventListener(this.visibilityChange,this.handleVisibilityChange,!1)};var ht="unload",lt="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":"msHidden"in document?"msHidden":"",ft=lt.replace(/hidden/i,"visibilitychange"),pt=function(){};pt.prototype.run=function(t){var e=t.get("win"),n=0,i=+new Date,r=0,a=+new Date,o=new pe((function(t){t?n+=+new Date-i:i=+new Date}));this.onVisibilityChange=function(){if(document[lt]){r=+new Date-a;var e=t.getCommonData();if(e.add("properties",{$dr:r}),t.qdda&&(t.qdda.bussid||t.qdda.qq||t.qdda.qda_accountInfo)){var n={};t.qdda.bussid&&(n.bussid=t.qdda.bussid),t.qdda.qq&&(n.qq=t.qdda.qq),t.qdda.qda_accountInfo&&(n=de(de({},n),t.qdda.qda_accountInfo)),e.add("account",n)}t.ping("$pagestay",e,3)}else a=+new Date},this.cb=function(){try{o.remove(),n+=+new Date-i;var e=t.getCommonData();if(e.add("properties",{$dr:n}),t.qdda&&(t.qdda.bussid||t.qdda.qq||t.qdda.qda_accountInfo)){var r={};t.qdda.bussid&&(r.bussid=t.qdda.bussid),t.qdda.qq&&(r.qq=t.qdda.qq),t.qdda.qda_accountInfo&&(r=de(de({},r),t.qdda.qda_accountInfo)),e.add("account",r)}t.ping("$pageclose",e,3)}catch(e){t.sendError("err","pc-cb",e.name,e.message,!0)}},p(e,ht,this.cb),!t.vals.pageStayInited&&t.vals.pagestay&&ft&&p(e,ft,this.onVisibilityChange),t.vals.pagestay&&ft&&(t.vals.pageStayInited=!0)},pt.prototype.remove=function(t){var e=t.get("win");g(e,ht,this.cb)},Y.set("pc",pt);var gt=function(t,e,n,i){this.event=t,this.api=e,this.params=n,this.cb=i};gt.prototype.getQueryData=function(){return this.params},gt.prototype.size=function(){return this.encode({a:1}).length},gt.prototype.ping=function(t,e,n){var i=this.params.filter({a:1});t?function(t,e,n,i){var r=E();(n=n||{}).transport=r?"beacon":"img",O(t,e,n,i)}(this.api,i,{},n):O(this.api,i,{callback:e},n)},gt.prototype.encode=function(t){if(!t&&null!=this._encodeValue&&!this._changed)return this._encodeValue;var e=this.params.encode(t);return this._changed=!1,t||(this._encodeValue=e),e};var vt="QUEUESTORAGE",mt=function(t){try{var e=window.localStorage.getItem((t&&t._storage_prefix||"")+vt);return JSON.parse(e)}catch(t){console.log("qidianDA_Error",t)}},yt=function(t){try{window.localStorage.removeItem((t&&t._storage_prefix||"")+vt)}catch(t){console.log("qidianDA_Error",t)}},wt=function(){var t=E();this.max=D()&&t?8192:2047,this.queue=[]};wt.prototype.run=function(t){this.stopping=!0,this.tracker=t,this.heartBeatInterval=t.get("hbt"),this.batchApi=t.getFullApi("b"),this.eventApi=t.getFullApi("track"),2047===this.max&&this.tracker.flag(27)},wt.prototype.start=function(){this.stopping=!1,this.batchSend()},wt.prototype.stop=function(){this.stopping=!0},wt.prototype.push=function(t,e,n,i,r){var a=new gt(t,this.eventApi,e,i);if(r&&"BEACON"===r&&(n=3),this.stopping)return this.tracker.flag(24),void this._push(a,n);if(this._push(a,n),n&&n>1){var o=3===n;this.batchSend(o,r)}else{var s=1===n;this.waitForSend(s,r)}},wt.prototype._push=function(t,e){e?this.queue.unshift(t):this.queue.push(t)},wt.prototype.waitForSend=function(t,e){var n=this;if(this.queue.length&&!n.heartBeat){var i=this.tracker.wrap("pq-timer",(function(){n.heartBeat=null,n.batchSend(void 0,e)})),r=t?200:n.heartBeatInterval;n.heartBeat=le().setTimeout(i,r)}},wt.prototype._sendPing=function(t,e,n,i){if(this.tracker.canSend()||e){var r=this,a="req-"+t.params;q.start(a);var o=this.tracker.get("appkey"),s=this.tracker.get("kfuin"),c=((t.params.json.filter((function(t){return"event"===t.key}))||[])[0]||{}).value||"",d=i||this.tracker.vals.ping_method,u=this.tracker.vals.encrypt_mode||"default",h=this.tracker.qdda&&this.tracker.qdda.AES_FUNC;t.ping(e,this.tracker.wrap("pq-ipingcb",(function(e){n&&n(e),e&&r.tracker.sendError("req",t.pingName,e.name),q.end(a)})),{pingMethods:d,encryptMode:u,appkey:o,kfuin:s,event:c,defaultMethods:this.tracker.vals.ping_method,AES_FUNC:h})}},wt.prototype.batchSend=function(t,e){var n=this.queue[0];if(n&&(this.tracker.canSend()||t)){this.tracker.get("useOpenId")&&(n.params.getAccoutInfo("wechat")||(n.params.add("properties",{$appid:this.tracker.get("appid")}),n.params.addAccoutInfo("wechat",{openid:this.tracker.get("openid"),appid:this.tracker.get("appid")})));var i=0,r=5,a=function(t){};for(t&&(!function(t,e){if(t&&"Array"==Object.prototype.toString.call(t).slice(8,-1)&&0!==t.length){var n=JSON.stringify(t);try{window.localStorage.setItem((e&&e._storage_prefix||"")+vt,n)}catch(t){return 1}}}(this.queue.slice(1),this.tracker&&this.tracker.qdda),r=1,t=!1,a=function(t){});this.queue.length>0&&i++<r;){var o=this.queue.shift();if("pv"===o.pingName){this.tracker.trigger("pv-done");break}this._sendPing(o,t,s(o,i-1),e)}this.waitForSend(void 0,e)}function s(t,e){return function(n){t.cb&&t.cb(n),a(e)}}},wt.prototype.compress=function(t){var e=t[0];if(!e)return"";for(var n in e){var i=e[n];"[object Object]"===Object.prototype.toString.call(i)||oe(i)}},wt.prototype.calQuery=function(t,e){null!=e&&(t=t.slice(0,e));var n=t[0];if(!n)return"";var i="",r="&t="+N(+new Date);if(1===t.length)return"l[]="+n+r;for(var a=0,o=n.length;a<o;a++){for(var s,c=null,d=0,u=t.length;d<u;d++){if(s=t[d].charAt(a),null!=c&&c!==s)return h();c=s}i+=s}function h(){for(var e=[],n=0,o=t.length;n<o;n++)e.push(t[n].slice(a));return(i?"c="+i+"&":"")+"l[]="+e.join("&l[]=")+r}return h()},wt.prototype.remove=function(t){this.heartBeat&&(le().clearTimeout(this.heartBeat),this.heartBeat=null)},Y.set("pq",wt);var qt=function(t){return t.match(/(.*?)(#.*)/)},_t=function(t){var e=le();return t=t.replace(/\+/g," "),e.decodeURIComponent(t)},kt=function(t,e){var n=qt(t);if(n&&(t=n[1]),!t)return"";var i=le(),r=new i.RegExp("(?:&|\\?)?"+F(i.encodeURIComponent(e))+"=([^&]*)(?:&|$)","");return(n=t.match(r))&&n[1]?_t(n[1]):""},bt=function(t){var e=t.charAt(t.length-1);return"&"!==e&&"?"!==e||(t=t.slice(0,-1)),t},St=function(t,e,n){var i=t,r=qt(t),a="";if(r&&(t=r[1],a=r[2]),!t)return i;var o=le();e=o.encodeURIComponent(e);var s="array"===b(n)?n:[n],c=s.length,d=new o.RegExp("(&|\\?)?("+F(e)+"=)([^&]*)(&|$)","g"),u=0;for(t=t.replace(d,(function(t,e,n,i,r){if(e=e||"",u<c){var a=o.encodeURIComponent(s[u]);return u++,e+n+a+r}return e})),t=bt(t),u<c&&(t+=t.indexOf("?")>=0?"&":"?");u<c;)t+=e+"="+o.encodeURIComponent(s[u]),++u<c&&(t+="&");return t+a},Et=function(t,e){var n=t,i=qt(t),r="";if(i&&(t=i[1],r=i[2]),!t)return n;var a=le(),o=new a.RegExp("(&|\\?)?"+F(a.encodeURIComponent(e))+"=([^&]*)(?:&|$)","g");return(t=bt(t.replace(o,"$1")))+r},Dt="_EVENTS",It=function(){};It.prototype.on=function(t,e){var n=this[Dt];n||(n=this[Dt]={}),(n[t]=n[t]||[]).push(e)},It.prototype.off=function(t,e){if(t){var n=this[Dt];if(n&&n[t])if(e)for(var i=n[t],r=0;r<i.length;r++)i[r]===e&&(i[r]=null);else n[t].length=0}else this[Dt]={}},It.prototype.trigger=function(t){var e=V(arguments),n=this[Dt];if(t=e.shift(),n&&n[t])for(var i=n[t],r=0;r<i.length;r++)i[r]&&i[r].apply(this,e)};var Ct=function(t,e){var n=t.prototype,i=function(){};i.prototype=e.prototype;var r=t.prototype=new i;for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);t.prototype.constructor=t,t.superClass=e.prototype},At=function(t){var e=this;this.json=t&&t.params||[],this.suffixJSON=[],this._prefixLength=0,this.keyMap={},this.json.forEach((function(t,n){e.keyMap[t.key]=n})),this.account={}};Ct(At,It),At.prototype.addAccoutInfo=function(t,e){2===arguments.length?this.account[t]=e:1===arguments.length&&(this.account=t)},At.prototype.getAccoutInfo=function(t){return t?this.account[t]:this.account},At.prototype.prefix=function(t,e){this._add(t,e)},At.prototype.add=function(t,e){this._add(t,e)},At.prototype.flat=function(){if(this.json&&this.json.length){var t=[];this.json.forEach((function(e){if(ge(e.value))for(var n in e.value){var i=n.replace(/^\$/,"");t.push({key:i,value:e.value[n]})}else t.push(e)})),this.json=t,this.trigger("change")}},At.prototype._add=function(t,e,n){if(this.keyMap[t]||0===this.keyMap[t]){n=this.keyMap[t];var i=this.json[n].value;if(ge(e))for(var r in e)i[r]=e[r];else this.json[n].value=e;this.trigger("change")}else{var a={key:t,value:e};null!=n?this.json.splice(n,0,a):(this.keyMap[t]=this.json.length,this.json.push(a)),this.trigger("change")}},At.prototype.suffix=function(t,e){var n={key:t,value:e};this.suffixJSON.push(n),this.trigger("change")},At.prototype.hasKey=function(t){for(var e=0,n=this.json.length;e<n;e++)if(this.json[e].key===t)return!0;return!1},At.prototype.extend=function(t){for(var e in t)t.hasOwnProperty(e)&&null!=t[e]&&this.json.push({key:e,value:t[e]});this.trigger("change")},At.prototype.toJSON=function(){var t=this.json.concat(this.suffixJSON);return Object.keys(this.account).length>0&&t.unshift({key:"account",value:this.account}),t},At.prototype.filter=function(t){var e,n,i,r=this.json,a=[];for(Object.keys(this.account).length>0&&a.push({key:"account",value:this.account}),e=0,n=r.length;e<n;e++)t[(i=r[e]).key]||a.push(i);var o=this.suffixJSON;for(e=0,n=o.length;e<n;e++)t[(i=o[e]).key]||a.push(i);return a},At.prototype.size=function(t){return this.encode(t).length},At.prototype.encode=function(t){var e=this.toJSON();return At.encode(e,t)},At.encode=function(t,e){if(!t||!t.length)return"";var n={};return t.forEach((function(t){n[t.key]=t.value})),n},At.encodeValue=function(t){return le().encodeURIComponent(t).replace(/\(/g,"%28").replace(/\)/g,"%29")};var xt={query:function(t,e){var n=t.get("win").location.href;return kt(n,e)},setup:function(t,e){!1!==t.get("useOpenId")&&this.setupShare(t,e)},wxConfig:function(t,e,n){var i=this,r=t.get("win").wx;this.wx=r,r&&(r.config({appId:e.wxAppid,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),r.ready((function(){i.setupShare(t,e)})))},setupShare:function(t,e){var n=this,i=t.genUUID(!0);wx.onMenuShareTimeline(n._genShareConfig(t,i,e,1)),wx.onMenuShareAppMessage(n._genShareConfig(t,i,e,2)),wx.onMenuShareQQ(n._genShareConfig(t,i,e,4)),wx.onMenuShareWeibo(n._genShareConfig(t,i,e,5)),wx.onMenuShareQZone(n._genShareConfig(t,i,e,6))},_genShareConfig:function(t,e,n,i){var r=t.get("win"),a=n.link||r.location.href;a=Et(a,"qda_shareopenid"),a=Et(a,"qda_shareid"),a=Et(a,"qda_shareqid"),a=Et(a,"qda_sharelevel");var o=a=Et(a,"qda_sharelinkid");o=St(o,"qda_shareid",e),o=St(o,"qda_shareopenid",t.get("openid")),o=St(o,"qda_shareqid",t.get("qid")),o=St(o,"qda_sharelevel",n.shareLevel+1),o=St(o,"qda_sharelinkid",n.shareLinkid);var s=this,c={title:n.title||"",link:o,imgUrl:n.imgUrl||"",success:function(){s.shared(t,e,n,i,o),s.setupShare(t,n)}};switch(i){case 1:break;case 2:c.desc=n.desc||"",c.type=n.type||"",c.dataUrl=n.dataUrl||"";case 4:case 5:case 6:c.desc=n.desc||" "}return c},shared:function(t,e,n,i,r){var a="";switch(i){case 1:a="分享到微信朋友圈";break;case 2:a="分享给微信朋友";break;case 3:a="微信的其他渠道";break;case 4:a="分享到QQ";break;case 5:a="分享到QQ空间";break;case 6:a="分享到腾讯微博";break;default:a="未知"}var o=t.getCommonData();o.add("properties",{$level:t.get("level"),$share_to:a,$share_id:e,$share_level:n.shareLevel+1,$share_url_path:r}),t.ping("$share",o,1),n.success&&n.success({$share_to:a,$share_id:e,$share_level:n.shareLevel+1,$share_url_path:r})}},Ot=function(t,e){var n=qt(t);if(n&&(t=n[1]),!t)return"";for(var i=le(),r=new i.RegExp("(?:&|\\?)?"+F(i.encodeURIComponent(e))+"=([^&]*)(?:&|$)","g"),a=[];n=r.exec(t);)a.push(_t(n[1]));return a.length<=1?a[0]||"":a},Tt=function(){};Tt.prototype.run=function(t,e){e.shareLevel=parseInt(ve(t.get("win"),"level"),10)||0,e.shareLinkid=ve(t.get("win"),"linkid")||t.genUUID(!0),xt.setup(t,e)};var Pt="weixin".split(","),jt={weixin:Tt},Nt=function(){this.runners={}};Nt.prototype.run=function(t,e){this.callRunner(t,"run",e)},Nt.prototype.remove=function(t){this.callRunner(t,"remove")},Nt.prototype.callRunner=function(t,e,n){for(var i=0;i<Pt.length;i++){var r=Pt[i],a=this.runners[r]=this.runners[r]||new jt[r],o=a[e];o&&o.call(a,t,n)}},Y.set("share",Nt);var Mt=function(){},$t="_pid";Mt.prototype.run=function(t){var e=t.get("doc").documentElement,n=this;this.addPid=t.wrap("clc-cb",(function(e){var i=function(t,e,n){"function"==typeof e&&(n=e,e=""),e=(e||"").toLowerCase();for(var i,r,a=t;a&&(i=a,r=void 0,(r=!e||(i&&i.nodeName||"").toLowerCase()===e)&&"function"==typeof n&&(r=n(i)),!r);)a=a.parentNode;return a}(st(e),"a",(function(t){return t.href}));i&&(Ot(i.href,"wpa_type")||"wpa"===Ot(i.href,"_type"))&&(t.set("wpa_clc",!0),n.timeoutId=setTimeout((function(){t.set("wpa_clc",!1)}),250),Ot(i.href,$t)||(i.href=i.href+"&"+"_pid="+t.get("pid")))}));var i=t.supportTouch;i&&t.flag(35),p(e,i?"touchstart":"mousedown",this.addPid)},Mt.prototype.remove=function(t){var e=t.get("doc").documentElement;this.timeoutId&&clearTimeout(this.timeoutId),g(e,t.supportTouch?"touchstart":"mousedown",this.addPid)},Y.set("wpapid",Mt);var Rt=function(){};Rt.prototype.run=function(t){var e=t.get("win"),n=t.get("doc"),i=t.get("ats")+"/ar/ActCap/pvRpt",r=(e.__QIDIAN=e.__QIDIAN||{},t.getCommonData(!0));r.add("eptype",at?2:1),r.add("ua",e.navigator.userAgent),r.add("refurl",t.getReferrer()),r.add("title",n.title),r.add("qidianid",t.get("visitorId")),r.add("visitorid",t.get("visitorId")),r.extend(undefined);var a=e.location.hash;"#"===a.charAt(0)&&(a=a.slice(1)),a&&r.add("uh",a),q.start("req-track"),O(i,r.toJSON(),{transport:"img",callback:t.wrap("track-cb",(function(e){e||(q.end("req-track"),t.trigger("track-done"))}),27)})},Rt.prototype.remove=function(t){},Y.set("track",Rt);var Lt=function(t){var e=1;if(t){var n=0;e=0;for(var i=t.length-1;i>=0;i--)e=(e<<6&268435455)+(n=t.charCodeAt(i))+(n<<14),e=0!=(n=266338304&e)?e^n>>21:e}return e},Ut=function(){this.vals={},It.apply(this,arguments)};Ct(Ut,It),Ut.prototype.set=function(t,e){if("string"==typeof t){var n=this.vals[t];n!==e&&(this.vals[t]=e,this.trigger("change",t,e,n))}else{var i=t;for(var r in i)i.hasOwnProperty(r)&&this.set(r,i[r])}},Ut.prototype.get=function(t){return this.vals[t]||""},Ut.prototype.map=function(t){for(var e in this.vals)if(this.vals.hasOwnProperty(e)){var n=this.vals[e];n&&t(e,n)}};var Bt,Vt=new Ut,Qt={wx:{pv:"/mini/pv",id:"/ping/id",b:"/mini/b","/r/o":"/r/o","/jsonp/wx":"/jsonp/wx",token:"/mini/token",share:"/mini/share",evt:"/mini/evt",page:"/mini/page",track:"/events/report"},common:{pv:"/ping/pv",id:"/ping/id",b:"/ping/b","/r/o":"/r/o","/jsonp/wx":"/jsonp/wx",pc:"/ping/pc",clc:"/ping/clc",evt:"/ping/evt",page:"/mini/page",track:"/events/report"}},Ft=["baidu","sogou","so","google","bing","yahoo"],Ht={baidu:"百度",sogou:"搜狗",so:"360",google:"谷歌",bing:"bing",yahoo:"雅虎"},Jt=function(t,e,n){var i=(t=t||window).location,r=function(t){return"/"===(t=function(t){return t?(t.length>1&&t.lastIndexOf("/")===t.length-1&&(t=t.substr(0,t.length-1)),0!==t.indexOf("/")&&(t="/"+t),t):"/"}(t))?1:t.split("/").length}(null!=n?n:i.pathname);return function(t){return function(t){return 0===t.indexOf(".")?t.substr(1):t}(t).split(".").length}(null!=e?e:i.hostname)+(r>1?"-"+r:"")+"-"},Wt=function(t,e,n,i,r){for(var a=H(t,e,r),o=Jt(e,n,i),s=0;s<a.length;s++){var c=a[s];if(0===c.indexOf(o))return c.slice(o.length).replace(/%2d/g,"-")}return""},Gt=function(t,e,n,i,r,a,o){var s=Jt(n,r,a);return J(t,s+(e+="").replace(/\-/g,"%2d"),n,i,r,a,o)},zt=/[^:]+:\/\/([^:\/]+)/,Kt=function(t){var e=t.match(zt);return e?e[1]:""},Xt={createSid:function(){this._hasCookie=this.supportCookie,this._hasCookie||this.flag(9),this._sidExpiredTime=0;var t=Vt.get("sid");if(t)return this.flag(10),void this.set("sid",t);var e=this.get("win"),n=kt(e.location.search,"ADTAG"),i=N(Lt(n)),r=this.get("doc").referrer,a=N(Lt(r));if(this._hasCookie){var o,s,c,d=this.getCookieSid(),u=d[0],h=d[1];if(!u||!h)return this.flag(11),void this.recreateSid(i,a);if(u&&h){var l=u.split("."),f=l[0],p=l[1];o=n&&f!==i||r&&p!==a&&(s=r,c=e.location.href,!(Kt(s)===Kt(c)))}if(!o)return this.flag(12),void this._saveSid(u,h);var g=Wt("_qddac",e,null,null,this.qdda).split(".");if(g[0]===i&&g[1]===a)return this.flag(13),void this._saveSid(g[0]+"."+g[1],g[2]+"."+g[3]);this.recreateSid(i,a)}else this.recreateSid(i,a)},recreateSid:function(t,e){var n=(t=t||N(Lt(kt(this.get("win").location.search,"ADTAG"))))+"."+(e=e||N(Lt(this.get("doc").referrer))),i=this.random();this._saveSid(n,i)},refreshCookie:function(){if(this._hasCookie){var t=this.getCookieSid(),e=t[0],n=t[1];if(e&&n){var i=this.get("sid");if(i[0]!==e||i[1]!==n)return void this.flag(15);this._setSidCookie()}else this.recreateSid()}else{+new Date>=this._sidExpiredTime&&(this.flag(14),this.recreateSid())}},_setSidCookie:function(){var t=18e5,e=+new Date,n=new Date;if(n.setHours(23),n.setMinutes(59),n.setSeconds(59),n.setMilliseconds(999),n=+n,this._hasCookie){var i=this.get("win"),r=this.get("sid"),a=Gt("_qdda",r[0],i,Math.min(t,n-e),null,"/",this.qdda);a&=Gt("_qddab",r[1],i,null,null,"/",this.qdda),this._hasCookie=a}this._hasCookie||(this._sidExpiredTime=Math.min(e+t,n))},_saveSid:function(t,e){this._setGlobal("sid",[t,e]),this._setSidCookie()},_getSid:function(){var t=this.get("sid");return t?t.join("."):""},getSid:function(t){return t||this.refreshCookie(),this._getSid()},getCookieSid:function(){var t=this.get("win");return[Wt("_qdda",t,null,"/",this.qdda),Wt("_qddab",t,null,"/",this.qdda)]},setClosedSid:function(){if(this._hasCookie){var t=this.getCookieSid(),e=t[0],n=t[1];if(e&&n){var i=this.get("win"),r=this._getSid();Gt("_qddac",r,i,Math.max(this._getLoadedTime()+5e3,1e4),null,null,this.qdda)}}},_getLoadedTime:function(){var t=this.get("win"),e=t.performance||t.webkitPerformance,n=e&&e.timing;if(!n)return 0;var i=n.navigationStart;return 0===i?0:n.loadEventStart-i}},Yt=fe("i"),Zt="__qq_qidian_da_pid",te=+new Date,ee=function(t,e,n,i){var r=this;r.qdda=t,Ut.apply(r,arguments),r.name=n,i&&(r.flag(6),r.set(i)),r.supportCookie=G(),r.supportTouch=K(),r.id=e,r.createIds(),r.tasks={},r.task("pq"),r.tasks.pq.start();var a=mt(r.qdda);a&&a.forEach((function(t){var e=new At(t);e.hasKey("time_free")||e.add("time_free",!0),r.tasks.pq.push("",new At(t))})),yt(r.qdda),r.init()};(function(t,e,n){var i;function r(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}"boolean"!=typeof t?(n=e,e=t,i=r):i=t?function t(e,n){for(var i in n)n.hasOwnProperty(i)&&(me(n[i])?(e[i]=e[i]||{},t(e[i],n[i])):e[i]=n[i])}:r,i(e,n)})(ee.prototype={init:function(){var t=this;this.get("preventAutoTrack")||(t.task("pv"),t.task("pc"),t.on("pv-done",(function(){t.task("id")}))),this.get("singlePage")&&this.singlePageEvent(),t.task("wpapid")},openPageStay:function(){try{if(!this.vals.pagestay&&!this.vals.pageStayInited){var t="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":"msHidden"in document?"msHidden":"",e=t.replace(/hidden/i,"visibilitychange"),n=this;!this.vals.pageStayInited&&e&&p(window,e,(function(){try{if(document[t]){timeSpanStay=+new Date-te;var e=n.getCommonData();if(e.add("properties",{$dr:timeSpanStay}),n.qdda&&(n.qdda.bussid||n.qdda.qq||n.qdda.qda_accountInfo)){var i={};n.qdda.bussid&&(i.bussid=n.qdda.bussid),n.qdda.qq&&(i.qq=n.qdda.qq),n.qdda.qda_accountInfo&&(i=de(de({},i),n.qdda.qda_accountInfo)),e.add("account",i)}n.ping("$pagestay",e,3)}else te=+new Date}catch(t){console.log("QidianDA_WEBSDK openPageStay Error")}})),e&&(this.vals.pageStayInited=!0);var i=window.location.href;setInterval((function(){try{var t=window.location.href;if(t!==i){timeSpanStay=+new Date-te;var e=n.getCommonData();if(e.add("properties",{$dr:timeSpanStay,$url:decodeURIComponent(i)}),n.qdda&&(n.qdda.bussid||n.qdda.qq||n.qdda.qda_accountInfo)){var r={};n.qdda.bussid&&(r.bussid=n.qdda.bussid),n.qdda.qq&&(r.qq=n.qdda.qq),n.qdda.qda_accountInfo&&(r=de(de({},r),n.qdda.qda_accountInfo)),e.add("account",r)}n.ping("$pagestay",e,3),te=+new Date,i=t}}catch(t){console.log("QidianDA_WEBSDK openPageStay Error")}}),5e3)}}catch(t){console.log("QidianDA_WEBSDK openPageStay Error")}},singlePageEvent:function(){try{var t=this;!function(){o.href;var e=window.history.pushState,n=window.history.replaceState;e&&(window.history.pushState=function(){e.apply(window.history,arguments),setTimeout((function(){t.reset()})),o.href}),n&&(window.history.replaceState=function(){n.apply(window.history,arguments),setTimeout((function(){t.reset()})),o.href});var i=e?"popstate":"hashchange";document.addEventListener(i,(function(){setTimeout((function(){t.reset()})),o.href}))}()}catch(t){console.log("QidianDA_WEBSDK SinglePageEvent Error")}},createIds:function(){this.createPid(),this.createQid(),this.createSid(),this.createVisitorId()},_setGlobal:function(t,e){this.set(t,e),Vt.set(t,e)},_genQDAValue:function(t){return"QD."+t},_calQDAValue:function(t){if(!t||"string"!=typeof t)return"";var e=t.match(/QD\.([\w\W]+)/);return e&&e[1]||""},genUUID:function(t){var e=this.get("win"),n=this.get("doc"),i=e.navigator.userAgent+(n.cookie?n.cookie:"")+this.getReferrer()+e.location.href;return i=N(h()^2147483647&Lt(i))+".",t?N(+new Date)+"."+i+l():i+this.random()},createPid:function(){var t=this.get("win"),e="__qq_qidian_da_pid",n=t[e],i=this._calQDAValue(n);i||(i=this.genUUID(),t[e]=this._genQDAValue(i)),this.set("pid",i)},createVisitorId:function(){var t=this.get("win"),e="__QIDIAN",n=e;this.qdda&&this.qdda._storage_prefix&&(n=this.qdda._storage_prefix+e);var i=t[n]&&t[n].visitorId;if(!i){var r="tencentSig";if(z()?i=this.qdda&&this.qdda._storage_prefix?t.localStorage.getItem(this.qdda._storage_prefix+r):t.localStorage.getItem(r):G()&&(i=(i=H(r,null,this.qdda))&&i[0]),!i){i=(Math.floor(10*Math.random())||1)+function(t,e){var n,i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(e=e||r.length,t)for(n=0;n<t;n++)a[n]=r[0|Math.random()*e];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(i=0|16*Math.random(),a[n]=r[19==n?3&i|8:i]);return a.join("")}(3,10)+(new Date).getTime().toString().slice(2,13);var a=H("_qddaz",null,this.qdda)[0];a=H("_qddaz",null,this.qdda)[0];var o=this._calQDAValue(a);o&&(i=o),z()?this.qdda&&this.qdda._storage_prefix?t.localStorage.setItem(this.qdda._storage_prefix+r,i):t.localStorage.setItem(r,i):G()&&J(r,i,null,null,null,null,this.qdda)}}return i=String(i),this.set("visitorId",i),i},createQid:function(){var t,e,n=this.get("win");if(this.supportCookie){var i=this.get("qidkey")||"_qddaz",r=31536e6;t=H(i,null,this.qdda)[0],(e=this._calQDAValue(t))&&!isNaN(Number(e))||(e=this.createVisitorId()),t=this._genQDAValue(e);var a,o=this.get("qiddomain");if(o)J(i,t,n,r,o,"/",this.qdda)&&(a=o);else a=function(t,e,n,i,r,a){var o,s={".com":1,".net":1,".org":1,".edu":1,".gov":1,".cn":1,".tw":1,".hk":1};if(r)for(o=0;o<r.length;o++)s["."+r[o]]=1;var c=n.location.hostname.split("."),d="",u="";for(o=c.length-1;o>=0;o--)if(!s[u="."+c[o]+u]&&J(t,e,n,i,u,"/",a)){d=u;break}return d}(i,t,n,r,["qq.com"],this.qdda);a||J(i,t,n,r,null,"/",this.qdda)}else t=n[Zt],(e=this._calQDAValue(t))||(e=randomId()),n[Zt]=this._genQDAValue(e);return this.set("qid",e),e},setValsByHand:function(t){try{t.appkey&&this.set("appkey",t.appkey),this.qdda&&(this.qdda.da_rpt_type=t.da_rpt_type)}catch(t){console.log("qidianDA_Error","setValsByHand",t)}},decodeUrl:function(t){return decodeURIComponent(t)},getCommonData:function(t){var e=this,n=ye(this.qdda),i=new At,r={$sdk_version:this.get("ver"),$page_id:this.get("pid"),$sdk_type:"jssdk",$title:this.get("doc").title,$referrer:this.getReferrer()};n.currentSE&&(r.$search_engine=n.currentSE),n.lastSE&&(r.$latest_search_engine=n.lastSE),r.$url=this.decodeUrl(this.get("doc").location.href),this.get("is_first_day")&&(r.$is_first_day=this.get("is_first_day"));var a=this.get("kfuin");a&&i.add("kfuin",a),this.get("appkey")&&i.add("appkey",this.get("appkey")),i.add("type",this.qdda&&this.qdda.da_rpt_type||"track"),i.add("qid",this.get("qid")),i.add("time",+new Date);var o=this.qdda.outerData;if(o)for(var s in o)i.add(s,o[s]);if(this.get("useOpenId")&&this.get("openid")){var c={openid:this.get("openid"),appid:this.get("appid")};this.get("unionid")&&(c.unionid=this.get("unionid")),i.addAccoutInfo("wechat",c)}var d=this.qdda.commonData;if(d)for(var s in d)r[s]=d[s];return["utm","latestutm"].forEach((function(t){var n=e.get(t);if(n)for(var i in n)r[i]=n[i]})),i.add("properties",r),i.json&&i.json.forEach((function(t){"qid"===t.key&&(t.value=String(t.value))})),i},getCommonQuery:function(t){return S(this.getCommonData(t).toJSON())},getFullApi:function(t){var e="common";return this.get("useOpenId")&&(e="wx"),this.get("ts")+Qt[e][t]},getReferrer:function(){return this.decodeUrl(this.qdda.referrer||this.get("doc").referrer)},ping:function(t,e,n,i,r){"$pageclose"===t&&this.setClosedSid(),e.add("event",t),this.tasks.pq.push(t,e,n||0,i,r)},jsonp:function(t,e,n){!function(t,e,n,i,r,a){var o=r?r.ownerDocument:document,s=o.defaultView||o.parentWindow,c=o.createElement("SCRIPT");a=a||"callback",n=n||1e4;var d,u,h=new RegExp("(?:\\?|&)"+a+"=([^&]*)"),f=function(t){return function(){try{if(t){var n=new Error;n.name="Timeout",e.call(s,n)}else{var i=V(arguments);i.unshift(null),e.apply(s,i),le().clearTimeout(d)}s[u]=null,delete s[u]}catch(n){y(n)}finally{c&&c.parentNode&&c.parentNode.removeChild(c)}}},p=t.match(h);u=p?p[1]:"S3JSONPPREFIX"+l(),s[u]=f(!1),n&&(d=le().setTimeout(f(!0),n)),p||(t+=(t.indexOf("?")<0?"?":"&")+a+"="+u),function(t,e,n,i,r){if(t.setAttribute("type","text/javascript"),i&&t.setAttribute("charset",i),t.setAttribute("src",e),r)r.insertBefore(t,r.firstChild);else{var a=n.getElementsByTagName("script"),o=a[a.length-1];if(o)o.parentNode.insertBefore(t,o);else{var s=n.getElementsByTagName("head")[0];s.insertBefore(t,s.firstChild)}}}(c,t,o,i,r)}(t+"?"+S(e.toJSON()),n)},task:function(t){var e=this.tasks[t];if(!e){var n=Y.get(t);if(!n)return void this.flag(8);e=this.tasks[t]=new n}var i=V(arguments,1);i.unshift(this),e.run.apply(e,i)},remove:function(){for(var t in this.tasks)"pq"!==t&&this.tasks.hasOwnProperty(t)&&this.tasks[t].remove(this);var e=this.tasks.pq;this.tasks={pq:e}},random:function(){return l()+"."+N(+new Date)},flag:function(t){j.flag(t,this.id)},wrap:function(t,e,n){return Yt.wrap(t,e,n,this)},sendError:function(t,e,n,i,r){},track:function(t,e,n,i){try{var r=this.getCommonData();if("$pageview"===t&&(r=this.getPVParams()),r.add("event",t),this.qdda.bussid||this.qdda.qq||this.qdda.qda_accountInfo){var a={};this.qdda.bussid&&(a.bussid=this.qdda.bussid),this.qdda.qq&&(a.qq=this.qdda.qq),this.qdda.qda_accountInfo&&(a=de(de({},a),this.qdda.qda_accountInfo)),r.add("account",a)}r.add("properties",e),this.ping(r,r,0,n,i)}catch(t){console.log("qidianDA_Error","track",t)}},privateTrack:function(t,e,n,i){try{var r=this.vals;e!==r.appkey&&e!==r.kfuin||this.track(t,n,i)}catch(t){console.log("qidianDA_Error","privateTrack",t)}},getWechatValue:function(t){return this.qdda.wechat&&this.qdda.wechat[t]||this.get(t)},getIDs:function(t){try{console.log("openid:"+this.get("openid")+"qid:"+this.get("qid"));var e={qid:this.get("qid")},n=this.getWechatValue("openid");n&&(e.openid=n);var i=this.getWechatValue("unionid");i&&(e.unionid=i),t&&t(e)}catch(t){console.log("qidianDA_Error","getIDs",t)}},send:function(t){var e="send"+Q(t),n=Array.prototype.slice.call(arguments,1);"function"==typeof this[e]&&this[e].apply(this,n)},reset:function(t){try{this.remove(),window[Zt]=null,this.createIds(),this.init()}catch(t){console.log("qidianDA_Error","reset",t)}},canSend:function(){return!this.get("useOpenId")||this.get("openid")},getPVParams:function(){var t=this.get("win"),e=(this.get("doc"),this.getFullApi("pv"),t.screen),n=e.orientation||e.mozOrientation||e.msOrientation||"";n&&n.type&&(n=n.type),Bt||(Bt={$tz:(new Date).getTimezoneOffset()/60});var i=this.getCommonData(!0),r=t.location.hash,a={};if(a={$level:this.get("level"),$sw:e.width,$sh:e.height,$bw:ct(t),$bh:dt(t)},this.get("fqid")&&(a.$share_qid=this.get("fqid")),this.get("foid")&&(a.$share_oid=this.get("foid")),"#"===r.charAt(0)&&(r=r.slice(1)),r&&(a.$uh=r),i.add("properties",Bt),i.add("properties",a),this.qdda.bussid||this.qdda.qq||this.qdda.qda_accountInfo){var o={};this.qdda.bussid&&(o.bussid=this.qdda.bussid),this.qdda.qq&&(o.qq=this.qdda.qq),this.qdda.qda_accountInfo&&(o=de(de({},o),this.qdda.qda_accountInfo)),i.add("account",o)}return i}},Xt),Ct(ee,Ut);var ne=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],ie=null,re="_qd_latest",ae="_qd_fst";le((function(){q.start("rdy",u);var n=we(),r=qe();_e();var o=function(){try{var t=localStorage.getItem(ae);return t?t==(new Date).setHours(0,0,0,0):(localStorage.setItem(ae,(new Date).setHours(0,0,0,0)),!0)}catch(t){console.log("qidianDA_Error",t)}}(),h="__qq_qidian_da_market_svr_domain";window[h]&&(c=window[h]);var f=fe("i",a,c),p=f.wrap("run",B,1),g=f.wrap("init",(function(t){var u,h={_storage_prefix:"",commonData:null,bussid:null,qda_accountInfo:null,qq:null,outerData:null,wechatInfo:{},win:t,version:a,trackers:{},loadedTrackers:{},referrer:"",createdFunc:null,privateDomain:"",AES_FUNC:null,ready:function(t){j.flag(5),t.call(this)},created:function(t){0===Object.keys(this.trackers).length?this.createdFunc=t:t.call(this)},setDomain:function(t){try{this.privateDomain=t}catch(t){console.log("qidianDA_Error","setDomain",t)}},setAes:function(t){try{this.AES_FUNC=t}catch(t){console.log("qidianDA_Error","setAes",t)}},create:function(e,i,a,u){try{"string"!=typeof i&&(u=a,a=i,i=""),isNaN(Number(e))&&(i=e,e="");var h,f,p=e+(i?"|"+i:"");if(this.loadedTrackers[p])return;if(this.loadedTrackers[p]=!0,"string"==typeof a?(f=a,h=u||{}):(h=a||{},f=null==u?"_"+l():u),this.trackers[f])throw new Error('Tracker name: "'+f+'" exist.');t.navigator.userAgent.toLowerCase().indexOf("micromessenger")<0&&(h.useOpenId=!1);var g=ve(t,"id");h.fid=g;var v=ve(t,"openid");h.foid=v;var m=ve(t,"qid");h.fqid=m;var y=ve(t,"level");h.level=y,i&&(h.appkey=i),e&&(h.kfuin=e),h.win=t,h.doc=t.document,h.ver=this.version,h.ptc=s,h.ts=this.privateDomain||c,h.ats=d,h.authors="https://da.qidian.qq.com",h.ss="https://combo.b.qq.com",h.hbt=0,h.utm=n,h.latestutm=r,h.is_first_day=o,h.ping_method||(h.ping_method="POST"),h.encrypt_mode||(h.encrypt_mode="default"),this.trackers[f]=new ee(this,p,f,h),this._runPlugins(),this.createdFunc&&this.createdFunc.call(this)}catch(t){console.log("qidianDA_Error","create",t)}},getBasicInfo:function(t){var e=this;try{var n=[];Object.keys(this.trackers).forEach((function(t){var i=e.trackers[t].vals,r=i.appkey,a=i.kfuin,o=i.preventAutoTrack;ue(i,["appkey","kfuin","preventAutoTrack"]);n.push({appkey:r,kfuin:a,preventAutoTrack:o})})),t(n)}catch(t){console.log("qidianDA_Error","getBasicInfo",t)}},setCommonData:function(t,e){try{t=t||{},this.commonData=de(de({},this.commonData),t);var n=e||{},i=n.bussid,r=n.qq,a=n.da_rpt_type,o=ue(n,["bussid","qq","da_rpt_type"]);this.outerData=de(de({},this.outerData),o),i&&(this.bussid=i),r&&(this.qq=r),a&&(this.da_rpt_type=a)}catch(t){console.log("qidianDA_Error","setCommonData",t)}},setAccountInfo:function(t){try{t&&(this.qda_accountInfo=t)}catch(t){console.log("qidianDA_Error","setAccountInfo",t)}},setPreFix:function(t){try{t&&(this._storage_prefix=String(t))}catch(t){console.log("qidianDA_Error","setPreFix",t)}},getTracker:function(t){return this.trackers[t]},eachTracker:function(t){for(var e in this.trackers)this.trackers.hasOwnProperty(e)&&t(e)},plugin:function(t,e){try{if((u=u||{})[t])return;u[t]={opts:e,ran:[]},this._runPlugin(t)}catch(t){console.log("qidianDA_Error","plugin",t)}},setReferrer:function(t){try{this.referrer=t}catch(t){console.log("qidianDA_Error","setReferrer",t)}},_runPlugin:function(t){var e=this,n=u[t];e.eachTracker((function(i){var r=e.getTracker(i);r&&!L(n.ran,i)&&(r.task(t,n.opts),n.ran.push(i))}))},_runPlugins:function(){if(u)for(var t in u)u.hasOwnProperty(t)&&this._runPlugin(t)}};f.wrap("create",h,4);var p="create,plugin,setReferrer,setCommonData,getBasicInfo,setAccountInfo,setPreFix,ready,created,setDomain,setAes".split(","),g="reset,track,getIDs,setValsByHand,privateTrack,openPageStay".split(",");!function(t,e,n,i,r){(n=n||window)[t]=n[t]||[],r=r||"ready";for(var a=n[t],o=function(t){t.shift||(t=V(t));var n=t.shift();"string"==typeof n?i?i(e,n,t):e[n].apply(e,t):e[r](n)};a.length;)o(a.shift());a.push=o}(e,h,i,f.wrap("mqp-cb",(function(t,e,n){if(L(p,e))t[e].apply(t,n);else{var i=e.split("."),r=i[1]||i[0],a=2===i.length?i[0]:null,o=function(e){var i=t.getTracker(e);i&&L(g,r)&&"function"==typeof i[r]&&i[r].apply(i,n)};null==a?t.eachTracker(o):o(a)}}),3))}),2);p(t,g)}),t)}}function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(n),!0).forEach((function(e){se(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ue(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function he(t,e){var n=function(t){var e=(t||window).document.createElement("iframe");return e.src="javascript:false",e.title="",e.role="presentation",e.frameBorder="0",e.tabIndex="-1",(e.frameElement||e).style.cssText="position:absolute;width:0;height:0;border:0;",e}(e=e||window);return v(n,e),function(t,e){var n,i,r=t.ownerDocument,a=!1;try{n=t.contentWindow,i=n.document}catch(o){a=!0,p(t,"load",(function(){n=t.contentWindow,i=n.document,g(t,"load"),e(n,i,r.domain)})),t.src='javascript:void((function () {document.open("text/html", "replace");document.domain = "'+r.domain+'";document.close();})())'}a||e(n,i,"")}(n,(function(e,n,i){null==e.Array?(n.open("text/html","replace")._M_=function(){i&&(this.domain=i),e=this.defaultView||this.parentWindow,t(e)},n.write('<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body onload="document._M_();"></body></html>'),n.close()):t(e)})),n}function le(t,e){if(e=e||window,r||!t){var n=r||e;return t&&t(n),n}he((function(e){r=e,t(e)}),e)}function fe(t,e,n){if(R[t])return R[t];var i=new $(t,e,n);return R[t]=i,i}function pe(t){var e,n;this.cb=t,void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),e=e,this.handleVisibilityChange=function(){t(document[e])},this.hidden=e,this.visibilityChange=n,void 0===document.addEventListener||void 0===document[e]?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(n,this.handleVisibilityChange,!1)}function ge(t){return-1!==Object.prototype.toString.call(t).indexOf("Object")}function ve(t,e){try{var n="__qdf"+e+"__",i="qda_share"+e,r=Ot(t.location.href,i);return r?t.sessionStorage.setItem(n,r):r=t.sessionStorage.getItem(n),r}catch(t){console.log("qidianDA_Error",t)}}function me(t){return t&&"object"===b(t)&&!t.nodeType&&t!==t.window}function ye(t){lastSE=H("lastSE",null,t)[0];var e=function(){var t=document.referrer.split("/"),e="";if(t[2]){var n=(t=t[2]).split(".");n[1]&&(e=n[1])}else t="";return e}();return Ft.indexOf(e)>-1&&J("lastSE",e,window,31536e6,null,"/",t),{currentSE:Ht[e]||"",lastSE:Ht[lastSE]||""}}function we(){if(ie)return ie;var t={};return ne.forEach((function(e){var n=kt(o.href,e);n.length&&(t["$"+e]=n)})),ie=t,t}function qe(){var t=we(),e=function(t){try{var e=localStorage.getItem(re);return e?(e=JSON.parse(e))[t]:void 0}catch(t){console.log("qidianDA_Error",t)}}("latest_utm")||{};return ne.forEach((function(n){var i="$"+n;t[i]&&(e["$latest_"+n]=t[i])})),e}function _e(){ie&&function(t,e){try{var n=localStorage.getItem(re);(n=n?JSON.parse(n):{})[t]=e,localStorage.setItem(re,JSON.stringify(n))}catch(t){console.log("qidianDA_Error",t)}}("latest_utm",qe())}}();
